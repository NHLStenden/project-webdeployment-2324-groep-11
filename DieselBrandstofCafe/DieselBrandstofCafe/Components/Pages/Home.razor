@page "/"
@using DieselBrandstofCafe.Components.Data
@using DieselBrandstofCafe.Components.Models
@inject NavigationManager NavigationManager
@inject IEmployeeService EmployeeService

<PageTitle>Home</PageTitle>

<div class="container">
    <div class="row">
        <div class="col-3"> </div>
        <div class="col-6">
            <div class=" text-center Barstyle card card-padding card-colour">
                <br />
                <div class="progress">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 50%; color:orange;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="row">
                    <div class="col-4 text-colour" style="font-size:smaller">I</div>
                    <div class="col-4 text-colour" style="font-size:smaller">I</div>
                    <div class="col-4 text-colour" style="font-size:smaller">I</div>
                </div>
                <div class="row">
                    <div class="col-4 text-colour" style="font-size:smaller">Order Received</div>
                    <div class="col-4 text-colour" style="font-size:smaller">Preparing Order</div>
                    <div class="col-4 " style="font-size:smaller; color: #ee7721">Order Ready</div>
                </div>
            </div>
        </div>
    </div>
</div>
<br />
<br />


<section>
    <div class="container-fluid card card-colour" style="padding:25px">
        <!--Dit is de Welcome gedeelte-->
        <div class="row">
            <div class="col-sm-6 align-top text-center">
                <h1 class="card-body card-colour"><b class="text-colour">Welcome to <div style="color: #ee7721">Brandstof Cafe</div></b></h1>
            </div>
            <!--Hier komt een afbeelding-->
            <div class="col-sm-6">
                <img src="#" class="img-rounded card-body text-colour card_colour" alt="Brandstof Thumbnail" />
            </div>
        </div>
        <br />

        <div class="col-md-6">
            <p class="text-center text-colour"><b>Check out our menu and place your order directly</b></p>
        </div>
        <br />

        <!--Order en Menu knoppen-->
        <div class="row-cols-4">
            <div class="text-center col-6 text-colour">
                <button class="btn generic-button">Order</button>

                <button class="btn generic-button" @onclick="ToMenu">Menu</button>
            </div>
        </div>
        <br />
        <!--2de gedeelte van de eerste card-->
        <div class="row text-center text-colour">
            <h2><b>Order quickly and easily</b></h2>
            <br />
            <h12><b>Follow these simple steps to place your order</b></h12>
        </div>
        <br />

        <!--Order uitleg cards-->
        <div class="container">
            <div class="row text-center">
                <div class="col-md-3">
                    <div class="card h-100 card-padding card-colour" style="background-color: #26333f">
                        <h3 class="text-start Text-padding " style="color: #ee7721">1</h3>
                        <h5 class="text-start "><b style=" color:white">Enter your table number</b></h5>
                        <br />
                        <p class="text-start " style="font-size:small; color:white">First enter your table number</p>
                        <br />
                        <p class="text-start " style="font-size:small; color:white" @onclick="ToMenu"><a href="#">Order Now  ></a></p>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="card h-100 card-padding card-colour " style="background-color: #26333f" >
                        <h3 class="text-start Text-padding text-colour" style="color: #ee7721">2</h3>
                        <h5 class="text-start text-colour"><b style="color:white">Select a product and extra options</b></h5>
                        <br />
                        <p class="text-start text-colour" style="font-size:small; color:white">Select your product and any addons, place your order in the shopping cart</p>
                        <br />
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card h-100 card-padding card-colour" style="background-color: #26333f">
                        <div class="d-flex flex-row">
                            <img src="#" class="rounded text-colour col-6" alt="Step 3 image" />
                            <div class="col-6">
                                <h3 class="text-start Text-padding text-colour" style="color: #ee7721">3</h3>
                                <h5 class="text-start text-colour" style=" color:white"><b>Confirm, pay and wait for your order</b></h5>
                                <br />
                                <p class="text-start text-colour" style="font-size:small; color:white">
                                    You're almost there! Just make the payment,
                                    and we'll bring your food to you as soon as it's ready. You will also receive an email with the confirmation
                                </p>
                                <br />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <br />
    </div>
</section>

<br />
<br />

<!--your last order, deals and popular products zijn hier onder allemaal te vinden-->
<section>
    <div class="container ">
        <div class="row justify-content-center text-center">
            <div class="col-md-4">
                <div class="card h-100 card-padding card-maxheigh card-colour">
                    <h6 class="Text-padding text-colour"><b>Your Last Orders</b></h6>

                    <div class="row justify-content-center text-colour" style="font-size:smaller">

                        <p class="col-3">Order ID</p>
                        <p class="col-3">Tijd</p>
                        <p class="col-3">Status</p>
                        <p class="col-3">Prijs</p>
                        <div class="row">
                            <div class="card col-12 justify-content-center"></div>
                        </div>
                        
                        
                        <div><br/></div>
                            @foreach (var item in ProgressBestellingen)
                            {

                                <p class="col-3">@item.BestellingID#</p>
                                <p class="col-3">@item.TijdBestelling</p>
                                <p class="@GetStatusColorClass(item.StatusBestelling) col-3">@item.StatusBestelling</p>
                                <p class="col-3">€@item.TotaalPrijs</p>
                                <br />

                            }


                            @foreach (var item in PendingBestellingen)
                            {

                                <p class="col-3">@item.BestellingID#</p>
                                <p class="col-3">@item.TijdBestelling</p>
                                <p class="@GetStatusColorClass(item.StatusBestelling) col-3">@item.StatusBestelling</p>
                                <p class="col-3">€@item.TotaalPrijs</p>
                                <br />

                            }


                            @foreach (var item in CompleteBestellingen)
                            {
                       
                                <p class="col-3" >@item.BestellingID#</p>
                                <p class="col-3">@item.TijdBestelling</p>
                                <p class="@GetStatusColorClass(item.StatusBestelling) col-3">@item.StatusBestelling</p>
                                <p class="col-3">€@item.TotaalPrijs</p>
                                <br />

                            }
                        
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card h-100 card-padding card-colour">
                    <h6 class="Text-padding text-colour"><b>Deals</b></h6>
                    <br />
                    <div class="d-flex flex-row">
                        <div class="col-md-6">
                            <h5 class="text-center text-colour">Cold Coffee</h5>
                            <br />
                            <p class="text-center text-colour" style="font-size:small">Chilled coffee served over ice, sweetened and creamy</p>
                            <div class="text-center">
                                <button class="btn generic-button" style="">More info</button>
                                <button class="btn generic-button" style="" @onclick="ToMenu">Order</button>
                            </div>
                            <br />
                        </div>
                        <img src="#" class="rounded text-colour col-md-6" alt="Step 3 image" />
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card h-100 card-padding card-colour">
                    <h6 class="Text-padding text-colour"><b>Popular Products</b></h6>
                    <br />
                    <div class="d-flex flex-row">
                        <div class="col-md-6">
                            <h5 class="text-center text-colour">Espresso</h5>
                            <br />
                            <p class="text-center text-colour" style="font-size:small">Strong Italian coffee, base for drinks like lattes</p>
                            <div class="text-center">
                                <button class="btn generic-button">More info</button>
                                <button class="btn generic-button" @onclick="ToMenu">Order</button>
                            </div>
                            <br />
                        </div>
                        <img src="#" class="rounded text-colour col-md-6" alt="Step 3 image" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<br />
<br />
<br />
<br />

@code {
    private List<Bestelling> CompleteBestellingen = new List<Bestelling>();
    private List<Bestelling> PendingBestellingen = new List<Bestelling>();
    private List<Bestelling> ProgressBestellingen = new List<Bestelling>();

    public void ToMenu()
    {
        NavigationManager.NavigateTo("/menu");
    }


    protected override async Task OnInitializedAsync()
    {
        CompleteBestellingen = (await EmployeeService.GetOrderHistoryAsync()).ToList();
        PendingBestellingen = (await EmployeeService.GetOrdersByStatusAsync("Pending")).ToList();
        ProgressBestellingen = (await EmployeeService.GetOrdersByStatusAsync("In Progress")).ToList();
    }


    string GetStatusColorClass(string ?status)
    {
        switch (status)
        {
            case "Pending":
                return "Status-Pending";
            case "In Progress":
                return "Status-Progress";
            case "Completed":
                return "Status-Completed";
            default:
                return "text-muted";
        }
    }




}